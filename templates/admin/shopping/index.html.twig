{% extends 'base.html.twig' %}

{% set pathToViewCart = '' %}
{% if is_granted('ROLE_SUPERADMIN') %}
    {% set pathToAddItem = 'superadmin_shopping_additem' %}
    {% if app.session.get('items') is not empty %}
        {% set pathToViewCart = path('superadmin_shopping_viewcart') %}
    {% endif %}
{% elseif is_granted('ROLE_SALES')%}
    {% set pathToAddItem = 'admin_shopping_additem' %}
    {% if app.session.get('items') is not empty %}
        {% set pathToViewCart = path('admin_shopping_viewcart') %}
    {% endif %}
{% elseif is_granted('ROLE_USER') %}
    {% set pathToAddItem = 'client_shopping_additem' %}
    {% if app.session.get('items') is not empty %}
        {% set pathToViewCart = path('client_shopping_viewcart') %}
    {% endif %}
{% endif %}

{% block title %}Shopping{% endblock %}

{% block body %}

<div class="container">
    {% for message in app.flashes('success') %}
    <div class="alert alert-success">
        {{ message }}
    </div>
    {% endfor %} {% for message in app.flashes('danger') %}
    <div class="alert alert-danger">
        {{ message }}
    </div>
    {% endfor %}
    <h1>Lista de productos</h1>
    <br>
    {% if app.session.get('items') is not empty %}
    <div class="row">
        <a class="btn btn-info" href="{{pathToViewCart}}">Ver carro</a>
    </div>
    {% endif %}
    {# <div class="row">
        <div class="form-group">
            <label for="company">Empresas:</label>
            <select name="company" id="company">
            {% for company in companies %}
                <option id="{{company.id}}">{{company.name}}</option>
            {% endfor %}
            </select>
        </div>
    </div> #}
    <div class="row">
        {% for product in products %}
        <div class="col-sm-10 col-xs-12">
            <div class="panel panel-info ">
                <div class="panel-heading">
                    <h3 class="panel-title">{{ product.name}}</h3>
                </div>
                <div class="panel-body">
                    <p>{{ product.description }}</p>
                    IMAGEN<img src="" alt="">
                </div>
                <div class="panel-footer">
                    <a type="button" href="{{ path(pathToAddItem, {'itemId': product.uid }) }}" class="btn btn-xs btn-success" data-toggle="tooltip" data-placement="bottom" title="Agregar">
                        <i class="fa fa-fw fa-plus"></i>
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
 
</div>
{% endblock %}
