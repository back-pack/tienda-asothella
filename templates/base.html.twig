<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Oscar Eberle y Mariano Freddi">
    <title>{% block title %}Bienvenido a Asothella!{% endblock %}</title>
    {% block stylesheets %}
    <!-- Bootstrap Core CSS -->
    <link href="{{asset('css/bootstrap.min.css') }}" rel="stylesheet">
    <!-- Eeaepepé Core CSS -->
    <link href="{{ asset('css/maf.css') }}" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="{{ asset('css/sb-admin.css') }}" rel="stylesheet">
    <link href="{{ asset('font-awesome/css/font-awesome.min.css') }}" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="{{ asset('css/colorPicker.css')}} "> 
    {% endblock %} 
    {% block javascripts %}
    <script src="{{asset('js/jquery.js') }} "></script>
    <script src="{{asset('js/bootstrap.min.js') }}"></script>
    {% endblock %}
</head>

{% if is_granted('ROLE_SUPERADMIN')%}
    {% set pathToLogout = path('superadmin_logout') %}
    {% set pathToShopping = 'superadmin_shopping' %}
    {% set pathToShoppingEdit = 'superadmin_requirement_edit' %}
    {% set pathToDropCart = path('superadmin_shopping_dropcart') %}
{% else %}
    
    {% if is_granted('ROLE_SALES') or is_granted('ROLE_LOGISTIC') %}
        {% set pathToEditProfile = 'admin_user_edit' %}
        {% set pathToShopping = 'admin_shopping' %}
        {% set pathToLogout = path('admin_logout') %}
        {% set pathToShoppingEdit = 'admin_requirement_edit' %}
        {% set pathToDropCart = path('admin_shopping_dropcart') %}
    {% else %}
        {% set pathToEditProfile = path('client_user_edit') %}
        {% set pathToShopping = 'client_shopping' %}
        {% set pathToLogout = path('client_logout') %}
        {% set pathToShoppingEdit = 'client_requirement_edit' %}
        {% set pathToDropCart = path('client_shopping_dropcart') %}
    {% endif %}
{% endif %}

<body>
    <div id="wrapper">
        <nav class="navbar navbar-inverse navbar-fixed-top fondopip" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#"></a>
            </div>
            {% if is_granted('IS_AUTHENTICATED_FULLY') %}
            <ul class="nav navbar-right top-nav">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <i class="fa fa-user"></i> {{ app.user.username }}
                        <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        {% if is_granted('ROLE_SUPERADMIN')%}
                        <li>
                            <a href="{{ pathToLogout }}"><i class="fa fa-fw fa-power-off"></i>Salir</a>
                        </li>   
                        {% elseif is_granted('ROLE_SALES') or is_granted('ROLE_LOGISTIC') %}
                        <li>
                            <a href="{{ path(pathToEditProfile, { 'userId': '*' }) }}"><i class="fa fa-fw fa-gear"></i>Editar perfil</a>
                        </li>
                        <li>
                            <a href="{{ pathToLogout }}"><i class="fa fa-fw fa-power-off"></i>Salir</a>
                        </li>
                        {% else %}
                        <li>
                            <a href="{{ pathToEditProfile }}"><i class="fa fa-fw fa-gear"></i>Editar perfil</a>
                        </li>
                        <li>
                            <a href="{{ pathToLogout }}"><i class="fa fa-fw fa-power-off"></i>Salir</a>
                        </li>
                        {% endif %}
                    </ul>
                </li>
            </ul>
            {% endif %}
            <!-- Sidebar Menu Items - These collapse to the responsive navigation menu on small screens -->
            {% if is_granted('IS_AUTHENTICATED_FULLY') %}
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav side-nav">
                    {% if is_granted('ROLE_USER') %}
                    <li>
                        <a href="{{ path('client_index') }}"><i class="fa fa-fw fa-shopping-cart"></i> Pedidos</a>
                    </li>
                    {% else %}
                        {% if is_granted('ROLE_SUPERADMIN') %}
                        <li>
                            <a href="{{ path('superadmin_index') }}"><i class="fa fa-fw fa-shopping-cart"></i> Pedidos</a>
                        </li>
                        <li>
                            <a href="{{ path('superadmin_user_list') }}"><i class="fa fa-users"></i> Usuarios</a>
                        </li>
                        <li>
                                <a href="{{ path('superadmin_product_index') }}"><i class="fa fa-square"></i> Productos</a>
                            </li>
                        {% else %}
                        <li>
                            <a href="{{ path('admin_index') }}"><i class="fa fa-fw fa-shopping-cart"></i> Pedidos</a>
                        </li>
                        {% endif %}
                    {% endif %}
                    {% if (app.session.get('items') is not null and app.request.get('_route') != pathToShopping) or (app.session.get('items') is not null and app.request.get('_route') != pathToShoppingEdit) %}
                        <li>
                            <a href="{{ path(pathToShopping) }}"><i class="fa fa-shopping-cart"></i> Ver solicitud pendiente!</a>
                        </li>
                        <li>
                            <a href="{{ pathToDropCart }}"><i class="fa fa-cart-arrow-down"></i> Descartar solicitud pendiente</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
            {% endif %}
            <!-- /.navbar-collapse -->
        </nav>
        <div id="page-wrapper">
            <div class="container-fluid">
            {% block body %}{% endblock %}
            </div>
        </div>
    </div>
    <footer>
        <div class="row">
            <div class="col-xs-10 text-left"><h6>Todos los derechos<p class="hidden">( y los zurdos tambien)</p> reservados © 2018 Asothella </h6>
            </div>
            <a class="afip col-xs-1" href="./img/data_rual.jpg"></a>
            </div>
        </div>
</footer>

<script>
    $(document).ready(function(){
        $('[data-toggle="tooltip"]').tooltip();
    });
</script>
</body>
</html>